<div class="container mt-2">
  <h1 class="mb-4">材料リスト</h1>

  <div class="card mb-4" id="ingredient_form">
    <div class="card-header bg-primary text-white">
      新しい材料を追加
    </div>
    <div class="card-body">
      <%= form_with(model: @ingredient, url: ingredients_path, remote: true) do |form| %>
        <div class="mb-3">
          <%= form.label :'材料名', class: 'form-label' %>
          <%= form.text_field :name, class: 'form-control' %>
        </div>
        <div class="mb-3">
          <%= form.label :'㌘あたり原価', class: 'form-label' %>
          <div class="input-group">
            <%= form.number_field :cost_per_gram, step: 0.1, class: 'form-control' %>
            <span class="input-group-text">円</span>
          </div>
        </div>
        <%= form.submit '材料を追加する', class: 'btn btn-success' %>
      <% end %>
    </div>
  </div>

  <div id="ingredient_list">
    <h2 class="mb-3">現在の材料</h2>
    <% if @ingredients.any? %>
      <ul class="list-group mb-4">
        <% @ingredients.each do |ingredient| %>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <span><strong><%= ingredient.name %></strong> : <%= ingredient.cost_per_gram %>円</span>
            <%= button_to "削除", ingredient_path(ingredient.id), { method: :delete, form: { data: { turbo_confirm: "本当に削除しますか？" } } } %>
          </li>
        <% end %>
      </ul>
    <% else %>
      <div class="alert alert-info">
        材料は登録されていません。
      </div>
    <% end %>
  </div>

  <div class="mt-3">
    <%= link_to '戻る', request.referer || root_path, class: 'btn btn-outline-secondary' %>
  </div>
</div>
