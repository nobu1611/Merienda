<div class="container mt-2">
  <h1 class="mb-4">新しい材料を追加</h1>

  <div class="card mb-4" id="ingredient_form">
    <div class="card-body">
      <%= form_with(model: @ingredient, url: ingredients_path, remote: true) do |form| %>
        <div class="mb-3">
          <%= form.label :'材料名', class: 'form-label' %>
          <%= form.text_field :name, class: 'form-control' %>
        </div>
        <div class="mb-3">
          <%= form.label :'㌘あたり原価', class: 'form-label' %>
          <div class="input-group">
            <%= form.number_field :cost_per_gram, step: 0.01, class: 'form-control' %>
            <span class="input-group-text">円</span>
          </div>
        </div>
        <%= form.submit '追加', class: 'btn btn-success' %>
      <% end %>
    </div>
  </div>

  <div id="ingredient_list">
    <h2 class="mb-3">材料リスト</h2>
    <% if @ingredients.any? %>
      <ul class="list-group mb-4">
        <% @ingredients.each do |ingredient| %>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <span><strong><%= ingredient.name %></strong> （<%= ingredient.cost_per_gram %>円/㌘）</span>
            <%= button_to "削除", ingredient_path(ingredient.id), method: :delete, data: { turbo: false }, form: { onSubmit: "return check()" }, class: 'btn-square-so-pop btn-square-so-pop:active delete-btn' %>
          </li>
        <% end %>
      </ul>
    <% else %>
      <div class="alert alert-info">
        材料は登録されていません。
      </div>
    <% end %>
  </div>

  <div class="mt-3">
    <%= link_to '戻る', request.referer || root_path, class: 'btn btn-outline-secondary return-btn btn-square-so-pop btn-square-so-pop:active' %>
  </div>
</div>

<script>
  function check(){
  if(window.confirm('本当に削除しますか？')){
    return true;
  }
  else{
    return false;
  }
}
</script>

<style>
    .edit-btn {
    border: solid 3px #000000;
    padding: 6px;
    background-color: green;
    border-radius: 20px;
    text-decoration: none;
}

.delete-btn {
    border: solid 3px #000000;
    padding: 6px;
    background-color: red;
    border-radius: 20px;
    text-decoration: none;
}

.return-btn {
    border: solid 3px #000000;
    padding: 6px;
    background-color: #8CA404;
    border-radius: 20px;
    text-decoration: none;
}


.btn-square-so-pop {
  position: relative;
  display: inline-block;
  padding: 0.25em 0.5em;
  text-decoration: none;
  color: #FFF;
  border-radius: 4px;
  box-shadow: inset 0 2px 0 rgba(255,255,255,0.2), inset 0 -2px 0 rgba(0, 0, 0, 0.05);
  font-weight: bold;
  border: solid 2px #000000;
}

.btn-square-so-pop:active {
  box-shadow: 0 0 2px rgba(0, 0, 0, 0.30);
}
</style>
